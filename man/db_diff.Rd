% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/maintenance.R
\name{db_diff}
\alias{db_diff}
\title{Compare a table between two snapshots}
\usage{
db_diff(
  schema = "main",
  table,
  from_version = NULL,
  to_version = NULL,
  from_timestamp = NULL,
  to_timestamp = NULL,
  key_cols = NULL,
  collect = TRUE
)
}
\arguments{
\item{schema}{Schema name (default "main")}

\item{table}{Table name}

\item{from_version}{Starting snapshot version (integer) or NULL to use from_timestamp}

\item{to_version}{Ending snapshot version (integer, default: current) or NULL to use to_timestamp}

\item{from_timestamp}{Starting timestamp (alternative to from_version)}

\item{to_timestamp}{Ending timestamp (alternative to to_version, default: current)}

\item{key_cols}{Character vector of columns that uniquely identify rows.
If provided, enables detection of modified rows (not just added/removed).}

\item{collect}{If TRUE (default), returns collected data.frames.
If FALSE, returns lazy tbl references.}
}
\value{
A list with components: \code{added}, \code{removed}, and (if key_cols provided) \code{modified}
}
\description{
Shows the differences in a table between two snapshot versions
or timestamps. Returns added, removed, and (optionally) changed rows.
}
\examples{
\dontrun{
db_lake_connect()

# Compare versions 3 and 5
diff <- db_diff(table = "products", from_version = 3, to_version = 5)
diff$added
diff$removed

# Compare with key columns to see modifications
diff <- db_diff(table = "products", from_version = 3, to_version = 5,
                key_cols = "product_id")
diff$modified
}
}
